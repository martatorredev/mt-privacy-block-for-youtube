(()=>{"use strict";const e=window.wp.blocks,t=window.wp.i18n,o=window.wp.blockEditor,i=window.wp.components,l=window.ReactJSXRuntime;(0,e.registerBlockType)("mtdev/privacy-youtube-block",{title:(0,t.__)("Privacy YouTube Block","mtdev-privacy-block-for-youtube"),icon:"video-alt3",category:"embed",supports:{align:["left","center","right"]},attributes:{align:{type:"string",default:"center"},videoUrl:{type:"string",default:""},title:{type:"string",default:""},width:{type:"number",default:560},height:{type:"number",default:315},caption:{type:"string",default:""}},edit:({attributes:e,setAttributes:r})=>{const a=(0,o.useBlockProps)({className:e.align,"aria-label":(0,t.__)("YouTube video block","mtdev-privacy-block-for-youtube")}),c=e.videoUrl.match(/(?:youtube\.com\/watch\?v=|youtu\.be\/)([a-zA-Z0-9_-]+)/),u=c?c[1]:null,n=u?`https://www.youtube-nocookie.com/embed/${u}`:"";return(0,l.jsxs)("div",{...a,children:[(0,l.jsx)(o.BlockControls,{children:(0,l.jsx)(o.AlignmentToolbar,{value:e.align,onChange:e=>r({align:e})})}),(0,l.jsx)(o.InspectorControls,{children:(0,l.jsxs)(i.PanelBody,{title:(0,t.__)("Settings","mtdev-privacy-block-for-youtube"),children:[(0,l.jsx)(i.TextControl,{label:(0,t.__)("YouTube Video URL","mtdev-privacy-block-for-youtube"),value:e.videoUrl,onChange:e=>r({videoUrl:e}),placeholder:(0,t.__)("Enter YouTube video URL","mtdev-privacy-block-for-youtube")}),(0,l.jsx)(i.TextControl,{label:(0,t.__)("Video Title (recommended for accessibility)","mtdev-privacy-block-for-youtube"),value:e.title,onChange:e=>r({title:e}),placeholder:(0,t.__)("Describe the video content","mtdev-privacy-block-for-youtube")}),(0,l.jsx)(i.TextControl,{label:(0,t.__)("Caption (optional)","mtdev-privacy-block-for-youtube"),value:e.caption,onChange:e=>r({caption:e}),placeholder:(0,t.__)("Add a description for accessibility","mtdev-privacy-block-for-youtube")}),(0,l.jsx)(i.RangeControl,{label:(0,t.__)("Width (px)","mtdev-privacy-block-for-youtube"),value:e.width,onChange:e=>r({width:e}),min:200,max:1200}),(0,l.jsx)(i.RangeControl,{label:(0,t.__)("Height (px)","mtdev-privacy-block-for-youtube"),value:e.height,onChange:e=>r({height:e}),min:100,max:800})]})}),u?(0,l.jsxs)("figure",{children:[(0,l.jsx)("iframe",{width:e.width,height:e.height,src:n,title:e.title||(0,t.__)("YouTube video","mtdev-privacy-block-for-youtube"),frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0}),e.caption&&(0,l.jsx)("figcaption",{children:e.caption})]}):(0,l.jsx)("div",{className:"youtube-placeholder",children:(0,t.__)("Add a valid YouTube URL to preview the video.","mtdev-privacy-block-for-youtube")})]})},save:({attributes:e})=>{const i=o.useBlockProps.save({className:e.align,"aria-label":(0,t.__)("YouTube video block","mtdev-privacy-block-for-youtube")}),r=e.videoUrl.match(/(?:youtube\.com\/watch\?v=|youtu\.be\/)([a-zA-Z0-9_-]+)/),a=`https://www.youtube-nocookie.com/embed/${r?r[1]:null}`;return(0,l.jsxs)("figure",{...i,children:[(0,l.jsx)("iframe",{width:e.width,height:e.height,src:a,title:e.title||(0,t.__)("YouTube video","mtdev-privacy-block-for-youtube"),frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0}),e.caption&&(0,l.jsx)("figcaption",{children:e.caption})]})}})})();